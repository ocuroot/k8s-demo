{
  "kind": "ref",
  "body_type": "commands.RepoConfig",
  "links": [
    "github.com/ocuroot/k8s-demo/-/repo.ocu.star/@"
  ],
  "body": {
    "source": "b2N1cm9vdCgiMC4zLjAiKQoKcmVwb19hbGlhcygiZ2l0aHViLmNvbS9vY3Vyb290L2s4cy1kZW1vIikKCmRlZiBpbml0X3JlcG8oKToKICAgIG9yaWdpbl91cmwgPSBob3N0LnNoZWxsKCJnaXQgcmVtb3RlIGdldC11cmwgb3JpZ2luIikuc3Rkb3V0LnN0cmlwKCkKCiAgICAjIERlZmF1bHQgdG8gc3NoIGZvciBsb2NhbCB0ZXN0aW5nCiAgICByZXBvX3VybCA9ICJzc2g6Ly9naXRAZ2l0aHViLmNvbS9vY3Vyb290L2s4cy1kZW1vLmdpdCIKCiAgICAjIEFsd2F5cyB1c2UgaHR0cHMgZm9yIGNoZWNrb3V0IHdpdGggR2l0SHViIGFjdGlvbnMKICAgIGVudl92YXJzID0gaG9zdC5lbnYoKQogICAgaWYgIkdIX1RPS0VOIiBpbiBlbnZfdmFyczoKICAgICAgICByZXBvX3VybCA9ICJodHRwczovL3gtYWNjZXNzLXRva2VuOnt9QGdpdGh1Yi5jb20vb2N1cm9vdC9rOHMtZGVtby5naXQiLmZvcm1hdChlbnZfdmFyc1siR0hfVE9LRU4iXSkKCiAgICBpZiAiT0NVUk9PVF9MT0NBTF9NT0RFIiBpbiBlbnZfdmFyczoKICAgICAgICBzdG9yZS5zZXQoCiAgICAgICAgICAgIHN0b3JlLmZzKCIuLy5zdG9yZSIpLAogICAgICAgICkKICAgICAgICByZXR1cm4KCiAgICBzdG9yZS5zZXQoCiAgICAgICAgc3RvcmUuZ2l0KHJlcG9fdXJsLCBicmFuY2g9InN0YXRlIiksCiAgICApCgppbml0X3JlcG8oKQoKZGVmIGRvX3RyaWdnZXIoY29tbWl0KToKICAgIHByaW50KCJUcmlnZ2VyaW5nIHdvcmsgZm9yIHJlcG8gYXQgY29tbWl0ICIgKyBjb21taXQpCiAgICAKICAgICMgR2V0IGVudmlyb25tZW50IHZhcmlhYmxlcwogICAgZW52X3ZhcnMgPSBob3N0LmVudigpCiAgICAKICAgIGlmICJHSF9UT0tFTiIgaW4gZW52X3ZhcnM6CiAgICAgICAgZ2hfdG9rZW4gPSBlbnZfdmFyc1siR0hfVE9LRU4iXQogICAgICAgIAogICAgICAgICMgUmVwb3NpdG9yeSBvd25lciBhbmQgbmFtZSBmcm9tIHRoZSByZXBvIFVSTAogICAgICAgIG93bmVyID0gIm9jdXJvb3QiCiAgICAgICAgcmVwbyA9ICJrOHMtZGVtbyIKICAgICAgICAKICAgICAgICAjIEdpdEh1YiBBUEkgZW5kcG9pbnQgZm9yIHdvcmtmbG93IGRpc3BhdGNoCiAgICAgICAgd29ya2Zsb3dfaWQgPSAib2N1cm9vdC13b3JrLWNvbnRpbnVlLnltbCIKICAgICAgICB1cmwgPSAiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy97fS97fS9hY3Rpb25zL3dvcmtmbG93cy97fS9kaXNwYXRjaGVzIi5mb3JtYXQob3duZXIsIHJlcG8sIHdvcmtmbG93X2lkKQogICAgICAgIAogICAgICAgICMgUGF5bG9hZCB3aXRoIHRoZSBjb21taXQgdG8gY2hlY2sgb3V0CiAgICAgICAgcGF5bG9hZCA9IGpzb24uZW5jb2RlKHsicmVmIjogIm1haW4iLCAiaW5wdXRzIjogeyJjb21taXRfc2hhIjogY29tbWl0fX0pCiAgICAgICAgCiAgICAgICAgIyBIZWFkZXJzIGZvciBhdXRoZW50aWNhdGlvbgogICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vdm5kLmdpdGh1Yitqc29uIiwKICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAidG9rZW4gIiArIGdoX3Rva2VuLAogICAgICAgICAgICAiWC1HaXRIdWItQXBpLVZlcnNpb24iOiAiMjAyMi0xMS0yOCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHJpbnQoIlRyaWdnZXJpbmcgd29ya2Zsb3cgdmlhIEdpdEh1YiBBUEkiKQogICAgICAgIHJlc3BvbnNlID0gaHR0cC5wb3N0KHVybD11cmwsIGJvZHk9cGF5bG9hZCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIAogICAgICAgIGlmIHJlc3BvbnNlWyJzdGF0dXNfY29kZSJdID09IDIwNDoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0cmlnZ2VyZWQgd29ya2Zsb3ciKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJGYWlsZWQgdG8gdHJpZ2dlciB3b3JrZmxvdy4gU3RhdHVzIGNvZGU6ICIgKyBzdHIocmVzcG9uc2VbInN0YXR1c19jb2RlIl0pKQogICAgICAgICAgICBwcmludCgiUmVzcG9uc2U6ICIgKyByZXNwb25zZVsiYm9keSJdKQogICAgZWxzZToKICAgICAgICBwcmludCgiR0hfVE9LRU4gbm90IGF2YWlsYWJsZS4gQ2Fubm90IHRyaWdnZXIgR2l0SHViIHdvcmtmbG93LiIpCgp0cmlnZ2VyKGRvX3RyaWdnZXIp"
  }
}